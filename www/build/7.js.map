{"version":3,"sources":["../../src/pages/checkout/checkout.module.ts","../../src/pages/checkout/checkout.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { IonicPageModule } from \"ionic-angular\";\nimport { CheckoutPage } from './checkout';\n\n@NgModule({\n    declarations: [\n        CheckoutPage,\n    ],\n    imports: [\n        IonicPageModule.forChild(CheckoutPage),\n    ],\n    exports: [\n        CheckoutPage\n    ]\n})\nexport class CheckoutPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/checkout/checkout.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal';\nimport { WoocommerceProvider } from '../../providers/woocommerce/woocommerce';\n\n@IonicPage()\n@Component({\n  selector: 'page-checkout',\n  templateUrl: 'checkout.html',\n})\nexport class CheckoutPage {\ntot:any;\n  WooCommerce: any;\n  newOrder: any;\n  paymentMethods: any[];\n  paymentMethod: any; \n  billing_shipping_same: boolean;\n  userInfo: any;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public storage: Storage, public alertCtrl: AlertController, private payPal: PayPal, private WP: WoocommerceProvider) {\n    this.newOrder = {};\n    this.newOrder.billing = {};\n    this.newOrder.shipping = {};\n    this.billing_shipping_same = false;\n\n    this.paymentMethods = [\n      { method_id: \"bacs\", method_title: \"Direct Bank Transfer\" },\n      { method_id: \"cheque\", method_title: \"Cheque Payment\" },\n      { method_id: \"cod\", method_title: \"Cash on Delivery\" },\n      { method_id: \"paypal\", method_title: \"PayPal\" }];\n\n    this.WooCommerce = WP.init();\n\n  \n  }\n\n  setBillingToShipping() {\n    this.billing_shipping_same = !this.billing_shipping_same;\n\n    if (this.billing_shipping_same) {\n      this.newOrder.shipping = this.newOrder.billing;\n    }\n\n  }\n\n  placeOrder() {\n\n    let orderItems: any[]=[];\n    let data: any = {};\n\n    let paymentData: any = {};\n\n    this.paymentMethods.forEach((element, index) => {\n      if (element.method_id == this.paymentMethod) {\n        paymentData = element;\n      }\n    });\n    data = {\n\n      //Fixed a bug here. Updated in accordance with wc/v2 API\n      payment_method: paymentData.method_id,\n      payment_method_title: paymentData.method_title,\n      set_paid: true,\n\n      billing: this.newOrder.billing,\n      shipping: this.newOrder.shipping,\n      \n      line_items: orderItems\n      \n    };\n\n    if (paymentData.method_id == \"paypal\") {\n      this.storage.get(\"cart\").then((cart) => {\n      this.payPal.init({\n        PayPalEnvironmentProduction: \"AVNOvvhGRxLhUqUzHburwScJUM7RqQOrW536jKhnfnB0Ou2ObZoxwl-DNbHw8TNPmgD7JzKorPBVajF\",\n        PayPalEnvironmentSandbox: \"AYRr5hfq00I-CcbYlhvqkhLpEMyRJ69i9lgut8_8QnhHL4f6WuHDq6RS8_ADSMlhmk9rqBHKGcnUK8KS\"\n      }).then(() => {\n        // Environments: PayPalEnvironmentNoNetwork, PayPalEnvironmentSandbox, PayPalEnvironmentProduction\n        this.payPal.prepareToRender('PayPalEnvironmentSandbox', new PayPalConfiguration({\n          // Only needed if you get an \"Internal Service Error\" after PayPal login!\n          //payPalShippingAddressOption: 2 // PayPalShippingAddressOptionPayPal\n        })).then(() => {  \n         \n\n          var total = 0.00;\n          cart.forEach((element) => {\n  \n            if(element.variation){\n              orderItems.push({ product_id: element.product.id, variation_id: element.variation.id, quantity: element.qty });\n             this.tot = total + (element.variation.price * element.qty);\n            } else {\n              orderItems.push({ product_id: element.product.id, quantity: element.qty });\n              this.tot = total + (element.product.price * element.qty);\n            }\n          });\n            let payment = new PayPalPayment(this.tot.toString(), 'USD', 'Description', 'sale');\n            this.payPal.renderSinglePaymentUI(payment).then((response) => {\n              // Successfully paid\n\n              alert(JSON.stringify(response));\n\n\n              data.line_items = orderItems;\n              //console.log(data);\n              let orderData: any = {};\n\n              orderData.order = data;\n\n              this.WooCommerce.postAsync('orders', orderData.order).then((data) => {\n                alert(\"Order placed successfully!\");\n\n                let response = (JSON.parse(data.body));\n\n                this.alertCtrl.create({\n                  title: \"Order Placed Successfully\",\n                  message: \"Your order has been placed successfully. Your order number is \" + this.tot,\n                  buttons: [{\n                    text: \"OK\",\n                    handler: () => {\n                      this.navCtrl.push('HomePage');\n                    }\n                  }]\n                }).present();\n              })\n\n            })\n\n          }, () => {\n            // Error or render dialog closed without being successful\n          });\n        }, () => {\n          // Error in configuration\n        });\n      }, () => {\n        // Error in initialization, maybe PayPal isn't supported or something else\n      });\n\n \n\n\n\n    } else {\n\n      this.storage.get(\"cart\").then((cart) => {\n        let total = 0.00;\n        cart.forEach((element) => {\n          if(element.variation){\n            orderItems.push({ product_id: element.product.id, variation_id: element.variation.id, quantity: element.qty });\n            this.tot = total + (element.variation.price * element.qty);\n          } else {\n            orderItems.push({ product_id: element.product.id, quantity: element.qty });\n            this.tot = total + (element.product.price * element.qty);\n          }\n        });\n        this.payPal.init({\n          PayPalEnvironmentProduction: \"\",\n          PayPalEnvironmentSandbox: \"AYRr5hfq00I-CcbYlhvqkhLpEMyRJ69i9lgut8_8QnhHL4f6WuHDq6RS8_ADSMlhmk9rqBHKGcnUK8KS\"\n        }).then(() => {\n          // Environments: PayPalEnvironmentNoNetwork, PayPalEnvironmentSandbox, PayPalEnvironmentProduction\n          this.payPal.prepareToRender('PayPalEnvironmentSandbox', new PayPalConfiguration({\n            // Only needed if you get an \"Internal Service Error\" after PayPal login!\n            //payPalShippingAddressOption: 2 // PayPalShippingAddressOptionPayPal\n          })).then(() => {\n            let payment = new PayPalPayment( this.tot.toString(), 'USD', 'Description', 'sale');\n            this.payPal.renderSinglePaymentUI(payment).then(() => {\n  \n            }, () => {\n              // Error or render dialog closed without being successful\n            });\n          }, () => {\n            // Error in configuration\n          });\n        }, () => {\n          // Error in initialization, maybe PayPal isn't supported or something else\n        });\n        data.line_items = orderItems;\n\n        let orderData: any = {};\n\n        orderData.order = data;\n\n        this.WooCommerce.postAsync(\"orders\", orderData.order).then((data) => {\n\n          let response = (JSON.parse(data.body));\n\n          this.alertCtrl.create({\n            title: \"Order Placed Successfully\",\n            message: \"Your order has been placed successfully. Your order number is \" + response.order_number,\n            buttons: [{\n              text: \"OK\",\n              handler: () => {\n                this.navCtrl.setRoot('HomePage');\n              }\n            }]\n          }).present();\n\n        })\n\n      });\n\n\n    }\n\n\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/checkout/checkout.ts"],"sourceRoot":""}